"use strict";var QUEUE_NAME = 'orders/gk';

// AMQP PORT 5672

// amqp://user:pass@host.com/vhost
// amqp://localhost

// amqp://mindtree:mindtree@mt.nodesense.ai

var open = require('amqplib').
connect('amqp://test:test@mt.nodesense.ai');

// Publisher
var channel = null;

open.then(function (conn) {
  return conn.createChannel();
}).then(function (ch) {
  return ch.assertQueue(QUEUE_NAME).then(function (ok) {
    console.log('queue ready');
    channel = ch;

    return ch;
  });
})["catch"](
console.warn);

module.exports = function sendToQueue(msg) {
  console.log('sending to rabbitmq');
  if (channel) {
    channel.sendToQueue(QUEUE_NAME, Buffer.from(JSON.stringify(msg)));
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hcHAvY29uZmlnL21lc3NhZ2UtcXVldWUuanMiXSwibmFtZXMiOlsiUVVFVUVfTkFNRSIsIm9wZW4iLCJyZXF1aXJlIiwiY29ubmVjdCIsImNoYW5uZWwiLCJ0aGVuIiwiY29ubiIsImNyZWF0ZUNoYW5uZWwiLCJjaCIsImFzc2VydFF1ZXVlIiwib2siLCJjb25zb2xlIiwibG9nIiwid2FybiIsIm1vZHVsZSIsImV4cG9ydHMiLCJzZW5kVG9RdWV1ZSIsIm1zZyIsIkJ1ZmZlciIsImZyb20iLCJKU09OIiwic3RyaW5naWZ5Il0sIm1hcHBpbmdzIjoiYUFBQSxJQUFJQSxVQUFVLEdBQUcsV0FBakI7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxJQUFJQyxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQVA7QUFDSkMsT0FESSxDQUNJLGtDQURKLENBQVg7O0FBR0E7QUFDQSxJQUFJQyxPQUFPLEdBQUcsSUFBZDs7QUFFQUgsSUFBSSxDQUFDSSxJQUFMLENBQVUsVUFBU0MsSUFBVCxFQUFlO0FBQ3ZCLFNBQU9BLElBQUksQ0FBQ0MsYUFBTCxFQUFQO0FBQ0QsQ0FGRCxFQUVHRixJQUZILENBRVEsVUFBU0csRUFBVCxFQUFhO0FBQ25CLFNBQU9BLEVBQUUsQ0FBQ0MsV0FBSCxDQUFlVCxVQUFmLEVBQTJCSyxJQUEzQixDQUFnQyxVQUFTSyxFQUFULEVBQWE7QUFDbERDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGFBQVo7QUFDQVIsSUFBQUEsT0FBTyxHQUFHSSxFQUFWOztBQUVBLFdBQU9BLEVBQVA7QUFDRCxHQUxNLENBQVA7QUFNRCxDQVREO0FBVU9HLE9BQU8sQ0FBQ0UsSUFWZjs7QUFZQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFNBQVNDLFdBQVQsQ0FBdUJDLEdBQXZCLEVBQTRCO0FBQzNDTixFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxxQkFBWjtBQUNBLE1BQUlSLE9BQUosRUFBYTtBQUNYQSxJQUFBQSxPQUFPLENBQUNZLFdBQVIsQ0FBb0JoQixVQUFwQixFQUFnQ2tCLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZQyxJQUFJLENBQUNDLFNBQUwsQ0FBZUosR0FBZixDQUFaLENBQWhDO0FBQ0Q7QUFDRixDQUxEIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFFVRVVFX05BTUUgPSAnb3JkZXJzL2drJztcbiBcbi8vIEFNUVAgUE9SVCA1NjcyXG5cbi8vIGFtcXA6Ly91c2VyOnBhc3NAaG9zdC5jb20vdmhvc3Rcbi8vIGFtcXA6Ly9sb2NhbGhvc3RcblxuLy8gYW1xcDovL21pbmR0cmVlOm1pbmR0cmVlQG10Lm5vZGVzZW5zZS5haVxuXG52YXIgb3BlbiA9IHJlcXVpcmUoJ2FtcXBsaWInKVxuICAgICAgLmNvbm5lY3QoJ2FtcXA6Ly90ZXN0OnRlc3RAbXQubm9kZXNlbnNlLmFpJyk7XG4gXG4vLyBQdWJsaXNoZXJcbmxldCBjaGFubmVsID0gbnVsbDtcblxub3Blbi50aGVuKGZ1bmN0aW9uKGNvbm4pIHtcbiAgcmV0dXJuIGNvbm4uY3JlYXRlQ2hhbm5lbCgpO1xufSkudGhlbihmdW5jdGlvbihjaCkge1xuICByZXR1cm4gY2guYXNzZXJ0UXVldWUoUVVFVUVfTkFNRSkudGhlbihmdW5jdGlvbihvaykge1xuICAgIGNvbnNvbGUubG9nKCdxdWV1ZSByZWFkeScpO1xuICAgIGNoYW5uZWwgPSBjaDtcblxuICAgIHJldHVybiBjaDtcbiAgfSk7XG59KVxuLmNhdGNoKGNvbnNvbGUud2Fybik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc2VuZFRvUXVldWUgKCBtc2cpIHtcbiAgY29uc29sZS5sb2coJ3NlbmRpbmcgdG8gcmFiYml0bXEnKVxuICBpZiAoY2hhbm5lbCkge1xuICAgIGNoYW5uZWwuc2VuZFRvUXVldWUoUVVFVUVfTkFNRSwgQnVmZmVyLmZyb20oSlNPTi5zdHJpbmdpZnkobXNnKSkpO1xuICB9XG59Il19